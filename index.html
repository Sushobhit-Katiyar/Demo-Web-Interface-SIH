<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Precision Agriculture System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
        }

        .card h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
        }

        .card h3::before {
            content: '';
            width: 4px;
            height: 25px;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            margin-right: 12px;
            border-radius: 2px;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .status-healthy { background-color: #27ae60; }
        .status-warning { background-color: #f39c12; }
        .status-critical { background-color: #e74c3c; }

        .metric-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding: 8px 0;
            border-bottom: 1px solid #ecf0f1;
        }

        .metric-value {
            font-weight: bold;
            color: #27ae60;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .control-section h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .button {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            margin: 5px;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
        }

        .button.emergency {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .button.emergency:hover {
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
        }

        .slider-container {
            margin: 15px 0;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ecf0f1;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(39, 174, 96, 0.3);
        }

        .map-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            height: 400px;
            position: relative;
            overflow: hidden;
        }

        .field-map {
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #a8e6cf, #88d8a3);
            border-radius: 15px;
            position: relative;
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(6, 1fr);
            gap: 2px;
        }

        .plot {
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .plot:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .plot-healthy { background-color: #27ae60; }
        .plot-warning { background-color: #f39c12; }
        .plot-critical { background-color: #e74c3c; }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 350px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            transition: width 0.3s ease;
        }

        .sensor-data {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .sensor-item {
            text-align: center;
            padding: 15px;
            background: rgba(39, 174, 96, 0.1);
            border-radius: 10px;
            border: 2px solid rgba(39, 174, 96, 0.2);
        }

        .sensor-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #27ae60;
        }

        .sensor-label {
            font-size: 0.9em;
            color: #7f8c8d;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .active-spray {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header" style="position:relative;">
            <!-- moved language buttons to the left side -->
            <div style="position:absolute; top:16px; left:20px;">
                <button id="btnEn" class="button" style="padding:8px 12px; margin-right:6px;" onclick="setLanguage('en')">EN</button>
                <button id="btnHi" class="button" style="padding:8px 12px;" onclick="setLanguage('hi')">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
            </div>
            <h1 data-i18n="headerTitle">üå± Smart Precision Agriculture System</h1>
            <p data-i18n="headerSubtitle">AI-Powered Pest Detection & Precision Spraying Control</p>
        </div>

        <div class="dashboard-grid">
            <div class="card">
                <h3 data-i18n="systemStatusCard">System Status</h3>
                <div class="status-indicator">
                    <div class="status-dot status-healthy"></div>
                    <span data-i18n="systemOperational">System Operational</span>
                </div>
                <div class="metric-row">
                    <span data-i18n="connectedSensors">Connected Sensors:</span>
                    <span class="metric-value" id="connectedSensorsValue">24/24</span>
                </div>
                <div class="metric-row">
                    <span data-i18n="aiDetectionAccuracy">AI Detection Accuracy:</span>
                    <span class="metric-value" id="aiAccuracyValue">94.7%</span>
                </div>
                <div class="metric-row">
                    <span data-i18n="lastSystemCheck">Last System Check:</span>
                    <span class="metric-value" id="lastCheckValue">2 min ago</span>
                </div>
                <div class="metric-row">
                    <span data-i18n="activeSprayersLabel">Active Sprayers:</span>
                    <span class="metric-value" id="activeSprayers">2/8</span>
                </div>
            </div>

            <div class="card">
                <h3 data-i18n="fieldHealthOverview">Field Health Overview</h3>
                <div class="status-indicator">
                    <div class="status-dot status-healthy"></div>
                    <span><span data-i18n="healthyPlants">Healthy Plants:</span> <strong id="healthyCount">892</strong></span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot status-warning"></div>
                    <span><span data-i18n="earlyInfection">Early Infection:</span> <strong id="warningCount">47</strong></span>
                </div>
                <div class="status-indicator">
                    <div class="status-dot status-critical"></div>
                    <span><span data-i18n="criticalInfection">Critical Infection:</span> <strong id="criticalCount">8</strong></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 94.2%"></div>
                </div>
                <p style="text-align: center; color: #7f8c8d; margin-top: 10px;"><span data-i18n="overallFieldHealth">Overall Field Health:</span> 94.2%</p>
            </div>

            <div class="card">
                <h3 data-i18n="pesticideUsageTitle">Pesticide Usage</h3>
                <div class="metric-row">
                    <span data-i18n="todaysUsage">Today's Usage:</span>
                    <span class="metric-value">12.3L</span>
                </div>
                <div class="metric-row">
                    <span data-i18n="traditionalUsage">Traditional Usage:</span>
                    <span style="color: #e74c3c;">45.8L</span>
                </div>
                <div class="metric-row">
                    <span data-i18n="savings">Savings:</span>
                    <span class="metric-value">73.1%</span>
                </div>
                <div class="metric-row">
                    <span data-i18n="costSaved">Cost Saved:</span>
                    <span class="metric-value">‚Çπ2,847</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 27%"></div>
                </div>
            </div>

            <div class="card">
                <h3 data-i18n="environmentSensorsTitle">Environmental Sensors</h3>
                <div class="sensor-data">
                    <div class="sensor-item">
                        <div class="sensor-value" id="temperature">28¬∞C</div>
                        <div class="sensor-label" data-i18n="labelTemperature">Temperature</div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-value" id="humidity">67%</div>
                        <div class="sensor-label" data-i18n="labelHumidity">Humidity</div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-value" id="soilMoisture">42%</div>
                        <div class="sensor-label" data-i18n="labelSoilMoisture">Soil Moisture</div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-value" id="windSpeed">3.2</div>
                        <div class="sensor-label" data-i18n="labelWind">Wind (km/h)</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="control-panel">
            <h3 style="color: #2c3e50; margin-bottom: 25px; font-size: 1.5em;" data-i18n="controlPanelTitle">Control Panel</h3>
            <div class="control-grid">
                <div class="control-section">
                    <h4 data-i18n="automatedControls">Automated Controls</h4>
                    <button class="button" onclick="toggleAutoMode()">
                        <span id="autoModeText">Enable Auto Mode</span>
                    </button>
                    <button class="button" onclick="startFullScan()">Start AI Scan</button>
                    <button class="button emergency" onclick="emergencyStop()">Emergency Stop</button>
                </div>

                <div class="control-section">
                    <h4 data-i18n="sprayIntensity">Spray Intensity</h4>
                    <div class="slider-container">
                        <input type="range" min="0" max="100" value="65" class="slider" id="sprayIntensity">
                        <p><span data-i18n="intensityLabel">Intensity:</span> <span id="intensityValue">65%</span></p>
                    </div>
                </div>

                <div class="control-section">
                    <h4 data-i18n="detectionSensitivity">Detection Sensitivity</h4>
                    <div class="slider-container">
                        <input type="range" min="1" max="10" value="7" class="slider" id="sensitivity">
                        <p><span data-i18n="sensitivityLabel">Sensitivity:</span> <span id="sensitivityValue">7/10</span></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="map-container">
            <h3 style="color: #2c3e50; margin-bottom: 20px;" data-i18n="fieldMapTitle">Field Map - Real-time Health Status</h3>
            <div class="field-map" id="fieldMap"></div>
        </div>
    </div>

    <div class="notification" id="notification">
        <h4 id="notificationTitle">System Alert</h4>
        <p id="notificationMessage">Loading...</p>
    </div>

    <script>
        let autoMode = false;
        let activeSprayCount = 2;
        let fieldData = [];

        // --- TRANSLATIONS (English + Hindi) ---
        const translations = {
            en: {
                headerTitle: "üå± Smart Precision Agriculture System",
                headerSubtitle: "AI-Powered Pest Detection & Precision Spraying Control",
                systemAlert: "System Alert",
                systemReady: "System Ready ‚Äî Welcome to the Smart Precision Agriculture System",
                systemStatusCard: "System Status",
                systemOperational: "System Operational",
                connectedSensors: "Connected Sensors:",
                aiDetectionAccuracy: "AI Detection Accuracy:",
                lastSystemCheck: "Last System Check:",
                activeSprayersLabel: "Active Sprayers:",
                fieldHealthOverview: "Field Health Overview",
                healthyPlants: "Healthy Plants:",
                earlyInfection: "Early Infection:",
                criticalInfection: "Critical Infection:",
                overallFieldHealth: "Overall Field Health:",
                controlPanelTitle: "Control Panel",
                automatedControls: "Automated Controls",
                sprayIntensity: "Spray Intensity",
                detectionSensitivity: "Detection Sensitivity",
                intensityLabel: "Intensity:",
                sensitivityLabel: "Sensitivity:",
                fieldMapTitle: "Field Map - Real-time Health Status",
                enableAuto: "Enable Auto Mode",
                disableAuto: "Disable Auto Mode",
                startScan: "Start AI Scan",
                emergencyStop: "Emergency Stop",
                autoEnabledMsg: "Auto Mode Enabled",
                autoEnabledDesc: "AI system will automatically detect and treat infected plants.",
                autoDisabledMsg: "Auto Mode Disabled",
                autoDisabledDesc: "Manual control activated.",
                scanStarted: "AI Scan Started",
                scanStartedDesc: "Scanning all plants for pest and disease detection...",
                scanComplete: "Scan Complete",
                scanCompleteDesc: "Found infections. Preparing targeted treatment.",
                emergencyStopActivated: "Emergency Stop Activated",
                emergencyStopDesc: "All spraying operations have been immediately stopped.",
                plotSelectedTitle: "Plot {n} Selected",
                plotSelectedMsg: "Status: {status}. Click to view detailed analysis and treatment options.",
                systemUpdate: "System Update",
                pesticideUsageTitle: "Pesticide Usage",
                todaysUsage: "Today's Usage:",
                traditionalUsage: "Traditional Usage:",
                savings: "Savings:",
                costSaved: "Cost Saved:",
                environmentSensorsTitle: "Environmental Sensors",
                labelTemperature: "Temperature",
                labelHumidity: "Humidity",
                labelSoilMoisture: "Soil Moisture",
                labelWind: "Wind (km/h)"
            },
            hi: {
                headerTitle: "üå± ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§™‡•ç‡§∞‡§ø‡§∏‡§ø‡§∂‡§® ‡§ï‡•É‡§∑‡§ø ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä",
                headerSubtitle: "‡§è‡§Ü‡§à-‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§ ‡§ï‡•Ä‡§ü/‡§∞‡•ã‡§ó ‡§™‡§π‡§ö‡§æ‡§® ‡§î‡§∞ ‡§∏‡§ü‡•Ä‡§ï ‡§∏‡•ç‡§™‡•ç‡§∞‡•á ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£",
                systemAlert: "‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§Ö‡§≤‡§∞‡•ç‡§ü",
                systemReady: "‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§§‡•à‡§Ø‡§æ‡§∞ ‚Äî ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§™‡•ç‡§∞‡§ø‡§∏‡§ø‡§∂‡§® ‡§è‡§ó‡•ç‡§∞‡•Ä‡§ï‡§≤‡•ç‡§ö‡§∞ ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à",
                systemStatusCard: "‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø",
                systemOperational: "‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§ï‡§æ‡§Æ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à",
                connectedSensors: "‡§ú‡•Å‡•ú‡•á ‡§∏‡•á‡§Ç‡§∏‡§∞:",
                aiDetectionAccuracy: "‡§è‡§Ü‡§à ‡§™‡§π‡§ö‡§æ‡§® ‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ:",
                lastSystemCheck: "‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§ú‡§æ‡§Å‡§ö:",
                activeSprayersLabel: "‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§∏‡•ç‡§™‡•ç‡§∞‡•á‡§∞‡•ç‡§∏:",
                fieldHealthOverview: "‡§´‡•Ä‡§≤‡•ç‡§° ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§Ö‡§µ‡§≤‡•ã‡§ï‡§®",
                healthyPlants: "‡§∏‡•ç‡§µ‡§∏‡•ç‡§• ‡§™‡•å‡§ß‡•á:",
                earlyInfection: "‡§™‡•ç‡§∞‡§æ‡§∞‡§Æ‡•ç‡§≠‡§ø‡§ï ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£:",
                criticalInfection: "‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£:",
                overallFieldHealth: "‡§ï‡•Å‡§≤ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø:",
                controlPanelTitle: "‡§ï‡§Ç‡§ü‡•ç‡§∞‡•ã‡§≤ ‡§™‡•à‡§®‡§≤",
                automatedControls: "‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£",
                sprayIntensity: "‡§∏‡•ç‡§™‡•ç‡§∞‡•á ‡§§‡•Ä‡§µ‡•ç‡§∞‡§§‡§æ",
                detectionSensitivity: "‡§ñ‡•ã‡§ú ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤‡§§‡§æ",
                intensityLabel: "‡§§‡•Ä‡§µ‡•ç‡§∞‡§§‡§æ:",
                sensitivityLabel: "‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤‡§§‡§æ:",
                fieldMapTitle: "‡§´‡•Ä‡§≤‡•ç‡§° ‡§Æ‡§æ‡§®‡§ö‡§ø‡§§‡•ç‡§∞ - ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§∏‡§Æ‡§Ø ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡•ç‡§•‡§ø‡§§‡§ø",
                enableAuto: "‡§ë‡§ü‡•ã ‡§Æ‡•ã‡§° ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§ï‡§∞‡•á‡§Ç",
                disableAuto: "‡§ë‡§ü‡•ã ‡§Æ‡•ã‡§° ‡§Ö‡§ï‡•ç‡§∑‡§Æ ‡§ï‡§∞‡•á‡§Ç",
                startScan: "‡§è‡§Ü‡§à ‡§∏‡•ç‡§ï‡•à‡§® ‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠ ‡§ï‡§∞‡•á‡§Ç",
                emergencyStop: "‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∞‡•ã‡§ï",
                autoEnabledMsg: "‡§ë‡§ü‡•ã ‡§Æ‡•ã‡§° ‡§∏‡§ï‡•ç‡§∑‡§Æ",
                autoEnabledDesc: "‡§è‡§Ü‡§à ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§∏‡•ç‡§µ‡§§‡§É ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§ø‡§§ ‡§™‡•å‡§ß‡•ã‡§Ç ‡§ï‡§æ ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ ‡§ï‡§∞ ‡§â‡§™‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§ó‡§æ‡•§",
                autoDisabledMsg: "‡§ë‡§ü‡•ã ‡§Æ‡•ã‡§° ‡§Ö‡§ï‡•ç‡§∑‡§Æ",
                autoDisabledDesc: "‡§Æ‡•à‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•à‡•§",
                scanStarted: "‡§è‡§Ü‡§à ‡§∏‡•ç‡§ï‡•à‡§® ‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠",
                scanStartedDesc: "‡§ï‡•Ä‡§ü ‡§î‡§∞ ‡§∞‡•ã‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§≠‡•Ä ‡§™‡•å‡§ß‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•ç‡§ï‡•à‡§®‡§ø‡§Ç‡§ó ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...",
                scanComplete: "‡§∏‡•ç‡§ï‡•à‡§® ‡§™‡•Ç‡§∞‡•ç‡§£",
                scanCompleteDesc: "‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§™‡§æ‡§è ‡§ó‡§è‡•§ ‡§≤‡§ï‡•ç‡§∑‡§ø‡§§ ‡§â‡§™‡§ö‡§æ‡§∞ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à‡•§",
                emergencyStopActivated: "‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∞‡•ã‡§ï ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø",
                emergencyStopDesc: "‡§∏‡§≠‡•Ä ‡§∏‡•ç‡§™‡•ç‡§∞‡•á ‡§ë‡§™‡§∞‡•á‡§∂‡§® ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§¨‡§Ç‡§¶ ‡§ï‡§∞ ‡§¶‡§ø‡§è ‡§ó‡§è ‡§π‡•à‡§Ç‡•§",
                plotSelectedTitle: "‡§™‡•ç‡§≤‡•â‡§ü {n} ‡§ö‡§Ø‡§®‡§ø‡§§",
                plotSelectedMsg: "‡§∏‡•ç‡§•‡§ø‡§§‡§ø: {status}. ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§î‡§∞ ‡§â‡§™‡§ö‡§æ‡§∞ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§¶‡•á‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§",
                systemUpdate: "‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü",
                pesticideUsageTitle: "‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï ‡§â‡§™‡§Ø‡•ã‡§ó",
                todaysUsage: "‡§Ü‡§ú ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó:",
                traditionalUsage: "‡§™‡§æ‡§∞‡§Ç‡§™‡§∞‡§ø‡§ï ‡§â‡§™‡§Ø‡•ã‡§ó:",
                savings: "‡§¨‡§ö‡§§:",
                costSaved: "‡§≤‡§æ‡§ó‡§§ ‡§¨‡§ö‡§æ ‡§π‡•Å‡§Ü:",
                environmentSensorsTitle: "‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø ‡§∏‡•á‡§Ç‡§∏‡§∞",
                labelTemperature: "‡§§‡§æ‡§™‡§Æ‡§æ‡§®",
                labelHumidity: "‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ",
                labelSoilMoisture: "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•Ä ‡§®‡§Æ‡•Ä",
                labelWind: "‡§π‡§µ‡§æ (‡§ï‡§ø‡§Æ‡•Ä/‡§ò‡§Ç)"
            }
        };
        let currentLanguage = 'hi';

        function applyTranslations() {
            const t = translations[currentLanguage] || translations.en;
            // translate any element with data-i18n
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) el.textContent = t[key];
            });

            // buttons and dynamic text
            const autoText = document.getElementById('autoModeText');
            if (autoText) autoText.textContent = autoMode ? t.disableAuto : t.enableAuto;
            const buttons = document.querySelectorAll('.control-section .button');
            if (buttons.length >= 3) {
                buttons[1].textContent = t.startScan;
                buttons[2].textContent = t.emergencyStop;
            }

            // notification title
            document.getElementById('notificationTitle').textContent = t.systemAlert;

            // style active language button
            document.getElementById('btnEn').style.opacity = currentLanguage === 'en' ? '1' : '0.6';
            document.getElementById('btnHi').style.opacity = currentLanguage === 'hi' ? '1' : '0.6';
        }

        function setLanguage(lang) {
            currentLanguage = (lang in translations) ? lang : 'en';
            applyTranslations();
            const t = translations[currentLanguage];
            showNotification(t.systemAlert, t.systemReady);
        }

        // apply translations immediately
        applyTranslations();

        // Initialize field map
        function initializeFieldMap() {
            const fieldMap = document.getElementById('fieldMap');
            for (let i = 0; i < 48; i++) {
                const plot = document.createElement('div');
                plot.className = 'plot';
                
                // Random health status for demonstration
                const health = Math.random();
                if (health > 0.85) {
                    plot.classList.add('plot-healthy');
                    plot.textContent = 'H';
                    fieldData.push('healthy');
                } else if (health > 0.7) {
                    plot.classList.add('plot-warning');
                    plot.textContent = 'W';
                    fieldData.push('warning');
                } else {
                    plot.classList.add('plot-critical');
                    plot.textContent = 'C';
                    fieldData.push('critical');
                }
                
                plot.onclick = () => selectPlot(i);
                fieldMap.appendChild(plot);
            }
        }

        function selectPlot(index) {
            const status = fieldData[index];
            const t = translations[currentLanguage];
            const title = t.plotSelectedTitle.replace('{n}', index + 1);
            const msg = t.plotSelectedMsg.replace('{status}', status.toUpperCase());
            showNotification(title, msg);
        }

        function toggleAutoMode() {
            autoMode = !autoMode;
            const t = translations[currentLanguage];
            const button = document.getElementById('autoModeText');
            if (autoMode) {
                button.textContent = t.disableAuto;
                showNotification(t.autoEnabledMsg, t.autoEnabledDesc);
            } else {
                button.textContent = t.enableAuto;
                showNotification(t.autoDisabledMsg, t.autoDisabledDesc);
            }
        }

        function startFullScan() {
            const t = translations[currentLanguage];
            showNotification(t.scanStarted, t.scanStartedDesc);
            // Simulate scan progress
            setTimeout(() => {
                showNotification(t.scanComplete, t.scanCompleteDesc);
                updateCounts();
            }, 3000);
        }

        function emergencyStop() {
            const t = translations[currentLanguage];
            showNotification(t.emergencyStopActivated, t.emergencyStopDesc, 'warning');
            activeSprayCount = 0;
            document.getElementById('activeSprayers').textContent = '0/8';
        }

        function showNotification(title, message, type = 'info') {
            const notification = document.getElementById('notification');
            const titleEl = document.getElementById('notificationTitle');
            const messageEl = document.getElementById('notificationMessage');
            
            titleEl.textContent = title;
            messageEl.textContent = message;
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        function updateCounts() {
            // Simulate dynamic updates
            document.getElementById('healthyCount').textContent = Math.floor(880 + Math.random() * 20);
            document.getElementById('warningCount').textContent = Math.floor(40 + Math.random() * 15);
            document.getElementById('criticalCount').textContent = Math.floor(5 + Math.random() * 8);
        }

        function updateSensorData() {
            document.getElementById('temperature').textContent = (26 + Math.random() * 6).toFixed(1) + '¬∞C';
            document.getElementById('humidity').textContent = Math.floor(60 + Math.random() * 15) + '%';
            document.getElementById('soilMoisture').textContent = Math.floor(35 + Math.random() * 20) + '%';
            document.getElementById('windSpeed').textContent = (2 + Math.random() * 3).toFixed(1);
        }

        // Slider updates
        document.getElementById('sprayIntensity').oninput = function() {
            document.getElementById('intensityValue').textContent = this.value + '%';
        };

        document.getElementById('sensitivity').oninput = function() {
            document.getElementById('sensitivityValue').textContent = this.value + '/10';
        };

        // Initialize system
        initializeFieldMap();
        
        // Update sensor data every 5 seconds
        setInterval(updateSensorData, 5000);
        
        // Simulate real-time updates
        setInterval(() => {
            if (Math.random() > 0.7) {
                const alerts = [
                    'New infection detected in Plot 23',
                    'Optimal spraying conditions detected',
                    'Treatment completed in Sector B',
                    'Humidity levels optimal for pest control'
                ];
                const randomAlert = alerts[Math.floor(Math.random() * alerts.length)];
                // try to translate 'System Update' as well if possible
                const t = translations[currentLanguage] || translations.en;
                showNotification(t.systemUpdate || 'System Update', randomAlert);
            }
        }, 15000);

        // Welcome message
        setTimeout(() => {
            // already applied by applyTranslations(); show welcome message in current language
            const t = translations[currentLanguage];
            showNotification(t.systemAlert, t.systemReady);
         }, 1000);
    </script>
</body>
</html>